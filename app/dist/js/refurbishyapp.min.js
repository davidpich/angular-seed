/*! refurbishyapp 18-01-2015 */
"use strict";var myApp=angular.module("myApp",["ui.router","ui.utils","myApp.filters","myApp.services","myApp.directives","myApp.controllers","gettext","angular-google-analytics","ngMaterial","ngMessages"]).config(function($stateProvider,$urlRouterProvider,AnalyticsProvider){$urlRouterProvider.otherwise("/main"),$stateProvider.state("main",{url:"/main",templateUrl:"partials/partial1.html",controller:"AppCtrl"}).state("main.detail",{url:"/main/detail/:product",templateUrl:"partials/partial3.html",controller:"DetailProductCtrl"}).state("grid",{url:"/grid",templateUrl:"partials/partial2.html",controller:"GridCtrl"}),AnalyticsProvider.setAccount("UA-837977-23"),AnalyticsProvider.trackPages(!0),AnalyticsProvider.useAnalytics(!1),AnalyticsProvider.setPageEvent("$stateChangeSuccess"),AnalyticsProvider.ignoreFirstPageLoad(!1)}).run(function($rootScope,gettextCatalog){$rootScope.lang="es",gettextCatalog.currentLanguage="en",gettextCatalog.debug=!0,$rootScope.$on("$viewContentLoaded",function(){})});angular.module("myApp.controllers",[]).controller("AppCtrl",function($rootScope,$scope,APIservice,state,Analytics,$mdSidenav,$mdDialog){function DialogController($scope,$mdDialog){$scope.hide=function(){$mdDialog.hide()},$scope.cancel=function(){$mdDialog.cancel()},$scope.answer=function(answer){$mdDialog.hide(answer)}}$rootScope.lang="es",$scope.selectedIndex=null,$rootScope.languages=["es","en","de","fr","ca"],APIservice.getDevices($rootScope.lang).success(function(response){$rootScope.devices=response}),$rootScope.getDevices=function($event,lang){Analytics.trackEvent("change apple store",lang),$rootScope.lang=lang,$event.preventDefault(),$rootScope.devices=null,APIservice.getDevicesUrl(lang).success(function(response){$rootScope.devices=response,$mdDialog.hide()})},$scope.showAdvanced=function(ev){$mdDialog.show({controller:DialogController,templateUrl:"partials/dialog.tmpl.html",targetEvent:ev}).then(function(){$mdDialog.hide()},function(){$mdDialog.hide()})},$scope.toggleMenu=function(){$mdSidenav("left").toggle()},$scope.onSelectItem=function(item,index){Analytics.trackEvent("select category",item),$scope.selectedIndex=index,$scope.$parent.newFilter=item}}).controller("LeftSideCtrl",function($scope){$scope.close=function(){$mdSidenav("left").close().then(function(){$log.debug("close LEFT is done")})}}).controller("DetailProductCtrl",function(){}).controller("TranslateTextCtrl",function($scope,gettextCatalog,Analytics){$scope.languages=["en","de","fr","ca"],$scope.lang="en",$scope.changeLanguage=function(){Analytics.trackEvent("change apple store",lang),$scope.$parent.newFilter="",gettextCatalog.currentLanguage=$scope.lang},$scope.onSelectItem=function(item){Analytics.trackEvent("select category",item),$scope.$parent.$parent.newFilter=item}}).controller("LeftMenuCtrl",function($scope,APIservice,Analytics){$scope.onSelectItem=function(item){Analytics.trackEvent("select category",item),$scope.$parent.newFilter=item}}),angular.module("myApp.directives",[]).directive("appVersion",["version",function(version){return function(scope,elm){elm.text(version)}}]),angular.module("myApp.filters",[]).filter("truncate",function(){return function(text,length,end){return isNaN(length)&&(length=10),void 0===end&&(end="..."),text.length<=length||text.length-end.length<=length?text:String(text).substring(0,length-end.length)+end}}),angular.module("myApp.services",[]).service("APIservice",function($http){var _devicesCached={},refurbishyAPI={};return refurbishyAPI.getDevicesUrl=function(lang){var baseUrl="../../products_new_"+lang+".json",products=$http({method:"get",url:baseUrl,cache:!1});return this.setDevices(lang,products),products},refurbishyAPI.setDevices=function(lang,devices){_devicesCached[lang]=devices},refurbishyAPI.getDevicesCached=function(lang){return _devicesCached[lang]},refurbishyAPI.getDevices=function(lang){if(void 0===_devicesCached[lang]){var devices=this.getDevicesUrl(lang);return devices}return this.getDevicesCached(lang)},refurbishyAPI}).factory("state",function(){var state={state:"null"};return state.setState=function(status){state.data=status},state.getState=function(){return state.data},state});